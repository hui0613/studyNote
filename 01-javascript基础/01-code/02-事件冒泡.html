<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <ul>
      <li>1</li>
      <li>2</li>
      <li>3</li>
      <li>4</li>
      <li>5</li>
    </ul>
    <script>
      var oLi = document.getElementsByTagName("li");
      for (var i = 0; i < 5; i++) {
        item = oLi[i];
        (function (j) {
          item.addEventListener(
            "click",
            function () {
              console.log(j);
            },
            false
          );
        })(i);
      }
    </script>

    <script>
      /**
       * 时间运行环境 this 指向问题
       *
       * btn.onclick  --> this 指向 btn
       * 使用 btn.addEventListener -->  this 指向 btn
       *
       * 使用 btn.attachEvent  -- > this 指向 window
       */

      //  封装添加事件处理的函数

      function addEvent(el, type, fn) {
        if (el.addEventListener) {
          el.addEventListener(type, fn, false);
        } else if (el.attachEvent) {
          el.attachEvent("on" + type, fn, function () {
            // 使 this 指向调用的元素
            fn.call(el);
          });
        } else {
          el["on" + type] = fn;
        }
      }

      /**
       * 解除事件处理
       * btn.onclick = null;
       *
       * removeEventListener(type,fn,false)
       */
    </script>
  </body>
</html>
